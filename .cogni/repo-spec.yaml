schema_version: '0.1.2'

intent:
  name: cogni-git-review
  goals:
    - Enforce deterministic, machine-checkable PR hygiene via a single required check run
    - Provide fast tri-state verdicts (success|failure|neutral) with fail-safe neutral on errors
    - Be dogfoodable on this repo and trivially adoptable via intallation and dropping .cogni/repo-spec.yaml in a repo.
    - Stay extensible toward CI/CD orchestration and auto-merge via LangGraph.js workflows
    - Integrate with CogniMemory MCP for PR context, audit trails, and future codebase indexing
    - Seamlessly fit developer workflows and existing Repo management tools (Github Actions, Allstar, Checks API, etc.)
    - Scale org-wide with per-repo opt-in and graceful defaults when spec is absent
    - Deliver AI-powered advisory review aligned to repo goals (non-blocking initially), progressing to fix suggestions
  non_goals:
    - Re-implementing mature OSS scanners, linters, or policy manager. Strong preference towards integration over duplication
    - Long-running or heavy in-process analysis that degrades PR latency (batch/offload instead)
    - Storing secrets or sensitive artifacts in the app; use provider-native secrets
    - Subjective style enforcement beyond explicit repo rules/policies
    - Destructive git operations or auto-merge without explicit, policy-driven safeguards and auditability
    - Vendor lock-in or proprietary-only integrations that block open-source contributors
# Gates run in the order they appear below.
gates:
  - id: review_limits
    with:
      max_changed_files: 40
      max_total_diff_kb: 1500
  - id: goal_declaration
  - id: forbidden_scopes